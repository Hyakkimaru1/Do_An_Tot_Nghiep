<?xml version="1.0" encoding="ISO-8859-1"?>

<XMLDB PATH = 'local/webservices/db' VERSION = '2020073000'
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:noNamespaceSchemaLocation="../../../lib/xmldb/xmldb.xsd"
        COMMENT="This is the required database tables for this plugin">

    <TABLES>
        <TABLE NAME="attendance" COMMENT="attendance table">
            <FIELDS>
                <FIELD NAME="id" SEQUENCE="true" TYPE="int" LENGTH="10" NOTNULL="true"/>
                <FIELD NAME="course" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true"/>

            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
                <KEY NAME="foreign_attendance_course" TYPE="foreign" FIELDS="course"
                     REFTABLE="course" REFFIELDS="id"/>
            </KEYS>
        </TABLE>
        <TABLE NAME="attendance_sessions" COMMENT="sessions table">
            <FIELDS>
                <FIELD NAME="id" SEQUENCE="true" TYPE="int" LENGTH="10" NOTNULL="true"/>
                <FIELD NAME="attendanceid" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="roomid" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true"/>
                <FIELD NAME="sessdate" SEQUENCE="false" TYPE="int" LENGTH="20" NOTNULL="false"/>
                <FIELD NAME="duration" SEQUENCE="false" TYPE="int" LENGTH="20" NOTNULL="false"/>
                <FIELD NAME="lesson" SEQUENCE="false" TYPE="int" LENGTH="4" NOTNULL="true" />
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id" />
                <KEY NAME="foreign_sessions_attendance" TYPE="foreign" FIELDS="attendanceid"
                     REFTABLE="attendance" REFFIELDS="id"/>
                <KEY NAME="foreign_sessions_room" TYPE="foreign" FIELDS="roomid"
                     REFTABLE="room" REFFIELDS="id"/>
            </KEYS>
        </TABLE>
        <TABLE NAME="attendance_log" COMMENT="log table">
            <FIELDS>
                <FIELD NAME="id" SEQUENCE="true" TYPE="int" LENGTH="10" NOTNULL="true" />
                <FIELD NAME="studentid" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true"/>
                <FIELD NAME="sessionid" SEQUENCE="false" TYPE="int" LENGTH="10" NOTNULL="true"/>
                <FIELD NAME="timein" SEQUENCE="false" TYPE="int" LENGTH="20" NOTNULL="false"/>
                <FIELD NAME="timeout" SEQUENCE="false" TYPE="int" LENGTH="20" NOTNULL="false"/>
                <FIELD NAME="status" SEQUENCE="false" TYPE="int" LENGTH="1" NOTNULL="true"/>

            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
                <KEY NAME="foreign_log_sessions" TYPE="foreign" FIELDS="sessionid"
                     REFTABLE="attendance_sessions" REFFIELDS="id"/>
            </KEYS>
        </TABLE>
        <TABLE NAME="room" COMMENT="room table">
            <FIELDS>
                <FIELD NAME="id" SEQUENCE="true" TYPE="int" LENGTH="10" NOTNULL="true"/>
                <FIELD NAME="name" SEQUENCE="false" TYPE="text" NOTNULL="true"/>
                <FIELD NAME="campus" SEQUENCE="false" TYPE="text" NOTNULL="true"/>
            </FIELDS>
            <KEYS>
                <KEY NAME="primary" TYPE="primary" FIELDS="id"/>
            </KEYS>
        </TABLE>
    </TABLES>

</XMLDB>